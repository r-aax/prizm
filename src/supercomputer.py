# -*- coding: utf-8 -*-
"""
Some supercomputer functions.

Created on Thu Feb 21 15:06:46 2019

@author: Rybakov
"""

from ftree import FTree

#---------------------------------------------------------------------------------------------------
#
#---------------------------------------------------------------------------------------------------

#---------------------------------------------------------------------------------------------------
#
#---------------------------------------------------------------------------------------------------

#---------------------------------------------------------------------------------------------------
#
#---------------------------------------------------------------------------------------------------

#---------------------------------------------------------------------------------------------------
# Supercomputer center.
#---------------------------------------------------------------------------------------------------

def center_jscc():
    """
    JSCC center.

    Result:
        JSCC center.
    """

    t = FTree("center", "JSCC");

    # Segments.
    s = t.AddChild("segment", "100k")
    s.Set("nodes_count", 110)
    #
    s = t.AddChild("segment", "Petastream")
    s.Set("nodes_count", 8)
    #
    s = t.AddChild("segment", "Tornado")
    s.Set("nodes_count", 207)
    #
    s = t.AddChild("segment", "Haswell")
    s.Set("nodes_count", 42)
    #
    s = t.AddChild("segment", "Broadwell")
    s.Set("nodes_count", 136)
    #
    s = t.AddChild("segment", "KNL")
    s.Set("nodes_count", 38)
    #
    s = t.AddChild("segment", "NVIDIA")
    s.Set("nodes_count", 6)

    return t;

#---------------------------------------------------------------------------------------------------
# Tests.
#---------------------------------------------------------------------------------------------------

if __name__ == "__main__":
    jscc = center_jscc()
    jscc.Apply(lambda t: t.Set("to_string_fun",
                               lambda x: x.Type + " : " + x.Name
                                         + " (" + str(x.Get("nodes_count"))+  ")"),
               lambda t: t.IsType("segment"))
    jscc.PrintTree()

#---------------------------------------------------------------------------------------------------
